<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Atomic Plugins</title>

	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">
	<script type="text/javascript">
		if(window.location.pathname.indexOf("index.html") !== -1){
			document.write('<style>  #toc { display:none; } </style>');
		}
	</script>
	
	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">
	
	<style type="text/css">
		.alert-warning {
			background-color: #fcf8e3;
			border-color: #faebcc;
			color: #8a6d3b;
		}
		.alert {
			padding: 15px;
			margin-bottom: 20px;
			border: 1px solid transparent;
			border-radius: 4px;
		}
		.alert a{
			color: #8a6d3b;
			font-weight: bold;
		}
		.alert-success a {
			color: #519251;
			font-weight: bold;
		}
		.alert-success a:hover{
			color: #519251;
			text-decoration: underline;
			font-weight: bold;
		}
		.alert-warning a:hover{
			color: #8a6d3b;
			text-decoration: underline;
			font-weight: bold;
		}
		.page-title{
			display: none;
		}
	</style>
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html"><img src='img/logomini.png' style='width: 100px;height: 35px;'/> <span class='brand-adjust'>JavaScript Documentation</span></a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							
								<a href="Cocoon.html">Cocoon</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.html">Ad</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.AdMob.html">AdMob</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.Banner.html">Banner</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.Chartboost.html">Chartboost</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.Heyzap.html">Heyzap</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.Interstitial.html">Interstitial</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Ad.MoPub.html">MoPub</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.App.html">App</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Device.html">Device</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Dialog.html">Dialog</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.InApp.html">InApp</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Motion.html">Motion</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Multiplayer.html">Multiplayer</a>
							
						</li>
						
						<li>
							
							
						</li>
						
						<li>
							
							
						</li>
						
						<li>
							
								<a href="Cocoon.Multiplayer.LoopbackService.html">LoopbackService</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Notification.html">Notification</a>
							
						</li>
						
						<li>
							
								
							
						</li>
						
						<li>
							
								<a href="Cocoon.Notification.Parse.html">Parse</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Proxify.html">Proxify</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Share.html">Share</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Social.html">Social</a>
							
						</li>
						
						<li>
							
							
						</li>
						
						<li>
							
							
						</li>
						
						<li>
							
							
						</li>
						
						<li>
							
							
						</li>
						
						<li>
							
								<a href="Cocoon.Touch.html">Touch</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Utils.html">Utils</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.WebView.html">WebView</a>
							
						</li>
						
						<li>
							
								<a href="Cocoon.Widget.html">Widget</a>
							
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
		<div class="span8">
			
				<div id="main">
					


	<h1 class="page-title">Namespace: InApp</h1>
<section>

<header>
    <h2>
        <span class="ancestors"><a href="Cocoon.html">Cocoon</a>.</span>
    

    
        InApp
    
    </h2>
    
</header>

<article>
    <div class="container-overview">
    

    
        
            <div class="description"><p>Cocoon.InApp class provides a multiplatform, easy to use and secure in-app purchase API. 
Built-in support for local and server-side receipt validation, consumable and non-consumable purchase tracking and local products cache. 
Single JavaScript API for multiple IAP providers.</p></div>
        

        
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
            <h3>Example</h3>
            
    <pre class="sunlight-highlight-javascript">// Basic usage, register callbacks first
service = Cocoon.InApp;
service.on("purchase", {
    start: function(productId) {
        console.log("purchase started " + productId);
    },
    error: function(productId, error) {
        console.log("purchase failed " + productId + " error: " + JSON.stringify(error));
    },
    complete: function(purchase) {
        console.log("purchase completed " + JSON.stringify(purchase));
    }
});

// Service initialization
service.initialize({
    autofinish: true
}, 
function(error){
    if(error){
        console.log("Error: " + error);
    }
});

// Fetching products from server 
service.fetchProducts(productIds, function(products, error){
   if(error){
       console.log("Error: " + error);
   }
   else {
       var next = [];
       for (var i = 0; i < products.length; ++i) {
           var product = products[i];
           console.log(product);
       }
   } 
});   

// Purchasing products
service.purchase(product.productId, 3, function(error) { // Optional sugar callback
     if(error){
          console.log("Error: " + error);
     }
     else {
          console.log("Successfully purchased);    
     }
});</pre>


        
    
    </div>

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    <h4 class="name" id="canPurchase"><span class="type-signature">&lt;static> </span>canPurchase<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>This method allows you to check is the  InApp service is available and enabled in this platform.
Not all iOS and Android devices will have the InApp service available or enabled.
so you should check if it is before calling any other method.</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>True if the service is available and false otherwise.
Cocoon.InApp.canPurchase();</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">boolean</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="consume"><span class="type-signature">&lt;static> </span>consume<span class="signature">(productId, quantity, callback)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Consumes a purchase.
This makes that product to be purchasable again (on Android).</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The id or alias of the product to be consumed.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>quantity</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The quantity to be consumed, default value 1.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The callback function. It receives the following parameters:</p>
<ul>
<li>Consumed - The quantity consumed.</li>
<li>Error.</li>
</ul></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.consume(product.productId, 3, function(consumed, error) {
    if(error){
         console.log("Error: " + error);
    }
    else{
         console.log("Consumed items: " + consumed);
    }       
});</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="fetchProducts"><span class="type-signature">&lt;static> </span>fetchProducts<span class="signature">(productIds, callback)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Fetches the products information from the store.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productIds</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>Array of ids of products.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The callback function. </p>
<ul>
<li>An array of <a href="Cocoon.InApp.html#Product">Cocoon.InApp.Product</a>.</li>
<li>Error.</li>
</ul></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.fetchProducts(["magic.sword", "health.potion"], function(products, error){
    if(error){
         console.log("Error: " + error);
    }
    else{
         console.log(JSON.stringify(products));
    }     
});</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="finishPurchase"><span class="type-signature">&lt;static> </span>finishPurchase<span class="signature">(transactionId)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Finishes a purchase transaction and removes the transaction from the transaction queue.
You don't need to finish purchases if the autoFinishPurchases param is enabled in initialization (enabled by default)
This method must be called after a purchase finishes successfully and the &quot;success&quot;
event inside of the &quot;on purchase products&quot; callback has been received.
If the purchase includes some asset to download from an external server this method must be called after the asset has been successfully downloaded.
If you do not finish the transaction because the asset has not been correctly downloaded the &quot;purchase&quot; event will be called again later on.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>transactionId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The transactionId of the purchase to finish.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.finishPurchase(product.TransactionId);</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="getProducts"><span class="type-signature">&lt;static> </span>getProducts<span class="signature">()</span><span class="type-signature"> &rarr; {object}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Returns all the locally cached InApp products.</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>An array of <a href="Cocoon.InApp.html#Product">Cocoon.InApp.Product</a> that represents all the local products.</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">object</span>


	</dd>
</dl>


        
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">
var products = Cocoon.InApp.getProducts();</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="initialize"><span class="type-signature">&lt;static> </span>initialize<span class="signature">(params, callback)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Starts the InApp Service. This will make the system to initialize the InApp callbacks will start to be received after calling this method.
Because of this, you should have set your event handler before calling this method, so you won't lose any callback.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Cocoon.InApp.html#Settings">Cocoon.InApp.Settings</a></span>


            
            </td>

            

            

            <td class="description last"><p>The initialization params.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The callback function.It receives the following parameters:</p>
<ul>
<li>Error.</li>
</ul></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.initialize({
    autofinish: true
}, function(error){
     if(error){
          console.log("Error: " + error);
     }
});</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="isPurchased"><span class="type-signature">&lt;static> </span>isPurchased<span class="signature">(productId)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Returns if a product has been already purchased or not.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The product id of the product to be checked.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A boolean that indicates whether the product has been already purchased.</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">boolean</span>


	</dd>
</dl>


        
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">console.log(Cocoon.InApp.isPurchased(productId));</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="productForId"><span class="type-signature">&lt;static> </span>productForId<span class="signature">(productId)</span><span class="type-signature"> &rarr; {<a href="Cocoon.InApp.html#Product">Cocoon.InApp.Product</a>}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Gets the product information given a product indetifier.
It uses a local cache, so fetchProducts have to be called before if products are not saved from previous execution.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The product id of the product to be checked.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>The product.
var product = Cocoon.InApp.productForId(productId);</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type"><a href="Cocoon.InApp.html#Product">Cocoon.InApp.Product</a></span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="purchase"><span class="type-signature">&lt;static> </span>purchase<span class="signature">(productId, quantity, callback)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Requests a product purchase given its product id.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The id or alias of the product to be purchased.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>quantity</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The quantity to be purchased, default value 1.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The callback function. It receives the following parameters:</p>
<ul>
<li>Error.</li>
</ul></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">
Cocoon.InApp.purchase(product.productId, 1, function(error) {
    if(error){
         console.log("Error: " + error);
    }
    else {
         console.log("Successfully purchased);    
    }
});</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="restorePurchases"><span class="type-signature">&lt;static> </span>restorePurchases<span class="signature">(callback)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Restores all the purchases from the platform's market.
For each already purchased product the event &quot;purchase&quot; will be called.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The callback function. It receives the following parameters:</p>
<ul>
<li>Error.</li>
</ul></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.restorePurchases(function(error) {
   if (error){
      console.log("Error: " + error);
   } else {
      console.log("Purchases restored");
   }
});</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="setLudeiServerValidationHandler"><span class="type-signature">&lt;static> </span>setLudeiServerValidationHandler<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Use Ludei's server to validate purchases.
To enable validation using Ludei's server you first need to create an account in Ludei's Cloud server and create a project with you bundleId.</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.setLudeiServerValidationHandler();</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="setValidationHandler"><span class="type-signature">&lt;static> </span>setValidationHandler<span class="signature">(validationHandler)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Sets a custom function to validate purchases with your own server</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>validationHandler</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.setValidationHandler(function(receipt, productId, completion){
     ... //Custom validation code
     console.log("Custom validation: " + receipt + " " + productId);
     completion(true); //call completion function with true param if validation succeeds
});</pre>


    
</dd>

        
            
<dt>
    <h4 class="name" id="stockOfProduct"><span class="type-signature">&lt;static> </span>stockOfProduct<span class="signature">(productId)</span><span class="type-signature"> &rarr; {number}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Returns the quantity of available items for a specific productId.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The product id of the product to be checked.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A Number that indicates the available quantity of a productId to consume.</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">number</span>


	</dd>
</dl>


        
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">console.log(Cocoon.InApp.stockOfProduct(product.productId));</pre>


    
</dd>

        </dl>
    

    

    
        <h3 class="subsection-title">Events</h3>

        <dl>
            
<dt>
    <h4 class="name" id="event:On purchase">On purchase</h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Allows to listen to events about the purchasing process.</p>
<ul>
<li>The callback 'start' receives a parameter the product id of the product being purchased when the purchase of a product starts.</li>
<li>The callback 'complete' receives as parameter the <a href="Cocoon.InApp.html#PurchaseInfo">Cocoon.InApp.PurchaseInfo</a> object of the product being purchased when the purchase of a product is completed.</li>
<li>The callback 'error' receives a parameters the product id and an error message when the purchase of a product fails.</li>
</ul>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
        <h5>Example</h5>
        
    <pre class="sunlight-highlight-javascript">Cocoon.InApp.on("purchase", {
   start: function(productId) {
       console.log("purchase started " + productId);
   },
   error: function(productId, error) {
       console.log("purchase failed " + productId + " error: " + JSON.stringify(error));
   },
   complete: function(purchase) {
       console.log("purchase completed " + JSON.stringify(purchase));
   }
});</pre>


    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<dt>
    <h4 class="name" id="Product"><span class="type-signature">&lt;static> </span>Product<span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        <p>The object that represents a product in the store.</p>
    </div>
    
    
    

    
<dl class="details">
    

        <h5 class="subsection-title">Properties:</h5>

        <dl>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>Cocoon.InApp.Product</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>The object itself</p>
                <h6>Properties</h6>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The id of the product.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>title</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The title of the product.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>description</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The description of the product.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>localizedPrice</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The price of the product in local currency.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>price</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The price of the product.</p></td>
        </tr>

	
	</tbody>
</table>

            </td>
        </tr>

	
	</tbody>
</table>
</dl>

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    
</dd>

        
            
<dt>
    <h4 class="name" id="PurchaseInfo"><span class="type-signature">&lt;static> </span>PurchaseInfo<span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        <p>The object that represents the information of a purchase.</p>
    </div>
    
    
    

    
<dl class="details">
    

        <h5 class="subsection-title">Properties:</h5>

        <dl>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>Cocoon.InApp.PurchaseInfo</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>The object itself</p>
                <h6>Properties</h6>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>productId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The product id of the purchase.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>transactionId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The transaction id of the purchase.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>purchaseDate</code></td>
            

            <td class="type">
            
                
<span class="param-type">timestamp</span>


            
            </td>

            

            

            <td class="description last"><p>The date when the purchase was completed.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>quantity</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The number of products of the productId kind purchased in this transaction.</p></td>
        </tr>

	
	</tbody>
</table>

            </td>
        </tr>

	
	</tbody>
</table>
</dl>

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    
</dd>

        
            
<dt>
    <h4 class="name" id="Settings"><span class="type-signature">&lt;static> </span>Settings<span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        <p>The object that represents a product in the store.</p>
    </div>
    
    
    

    
<dl class="details">
    

        <h5 class="subsection-title">Properties:</h5>

        <dl>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>Cocoon.InApp.Settings</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>The object itself</p>
                <h6>Properties</h6>

<table class="props table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>autofinish</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"><p>If True, the transactions will finish automatically.</p></td>
        </tr>

	
	</tbody>
</table>

            </td>
        </tr>

	
	</tbody>
</table>
</dl>

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

    
    
</dd>

        </dl>
    
</article>

</section>




				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="copyright">
		Atomic Plugins - JavaScript Documentation by Ludei, DocStrap Copyright © 2012-2013 <br/> The contributors to the JSDoc3 and DocStrap projects.
		</span>
					<br />
					
				</footer>
			</div>

			
			<div class="span3">
				<div id="toc"></div>
			</div>
			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

			var prefix = $(".toc-h2").text();
			$($(".toc-h3").nextAll()).each(function(){

				if($(this).attr("class") === "toc-h3")
					return false;
				// Mega ugly hack, ask karliky
				// Replace the "<static>" word
				var str = prefix + "." + $(this).text().toString().replace("<static> ","");
				// Replace the "function(args)" string

				str = str.replace(/ /g, "").replace(/\n/g, "");
				str = str.split("(");
				str = (str.length == 1) ? str.join("") : str[0] + "(" + ")";
				$($($(this)[0]).children()[0]).text(str);
			});
			$(".toc-h4 a").each(function(){
				var el 	= $(this);
				var str = el.text().toString().replace("<static> ","");
				
				str = str.split("(");
				str = (str.length == 1) ? str.join("") : str[0] + "(" + ")";
				el.text(str);
			});
			$(".description p").each(function(){
				var el = $(this);
				el.html(el.text());
			});
		} );
	</script>

	

</body>
</html>